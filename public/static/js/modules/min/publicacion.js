yOSON.AppCore.addModule("boxes-alertas",function(a){var b={alerta:"#clean-alert"},e={},c=function(){e.alerta=$(b.alerta)},f=function(){e.alerta.on("click","#close-alert",d)},d=function(){var g=$(this).parent();g.fadeOut("slow")};return{init:function(){c();f()}}});yOSON.AppCore.addModule("error-images",function(a){var b={};return{init:function(c){var d={"460":"w460h345","298":"w298h169","160":"w160h90","default":"w460h345"};$("img").on("error",function(){var e=$(this).width();if(d[e]){rootImg=d[e]}else{rootImg=d["default"]}$(this).attr("src",yOSON.baseHost+"static/img/imgerror/"+rootImg+".jpg")})},destroy:function(){}}});yOSON.AppCore.addModule("fancy-step1",function(b){var g={seeExample:$(".see-example"),bxplInfo:$(".bxpl-info")},c={yellow:{title:"Ejemplo Aviso Simple",img:$(".data-img-yellow").html()},gray:{title:"Ejemplo Aviso Simple Plus",img:$(".data-img-gray").html()},orange:{title:"Ejemplo Aviso Económico",img:$(".data-img-orange").html()},blue:{title:"Ejemplo Aviso Normal",img:$(".data-img-blue").html()},green:{title:"Ejemplo Aviso Premium",img:$(".data-img-green").html()}},d={yellow:{title:"Aviso Simple",titleAgentes:$(".data-name-yellow").text(),msg:$(".data-yellow").html()},gray:{title:"Aviso Simple Plus",titleAgentes:$(".data-name-gray").text(),msg:$(".data-gray").html()},orange:{title:"Aviso Económico",titleAgentes:$(".data-name-orange").text(),msg:$(".data-orange").html()},blue:{title:"Aviso Normal",titleAgentes:$(".data-name-blue").text(),msg:$(".data-blue").html()},green:{title:"Aviso Premium",titleAgentes:"",msg:$(".data-green").html()}},a=function(){g.seeExample.on("click",function(k){k.preventDefault();var l=$(this),j=l.attr("data-id"),h=c[j],m='<div id="example-detail" ><h2 class="urb-stitle">'+h.title+"</h2>"+h.img+"</div>";$.fancybox.showLoading();setTimeout(function(){$.fancybox({type:"html",openEasing:"easeOutBack",closeEasing:"easeInBack",openSpeed:500,closeSpeed:500,openEffect:"elastic",closeEffect:"elastic",afterLoad:function(){$.fancybox.hideLoading()},content:m})},0)})},e=function(h){g.bxplInfo.on("click",function(m){m.preventDefault();var n=$(this),k=n.attr("data-color"),j=d[k],l=function(){var p,o;if(h=="persona-natural"){p=j.title}else{if(h=="agentes"){p=j.titleAgentes}}o=j.msg;return'<div id="more-information"><h2 class="urb-stitle">'+p+'</h2><div class="text">'+o+"</div></div>"};$.fancybox({type:"html",width:500,height:"auto",autoSize:false,openEasing:"easeOutBack",closeEasing:"easeInBack",openSpeed:500,closeSpeed:500,openEffect:"elastic",closeEffect:"elastic",content:l()})})},f=function(j){var h={"persona-natural":function(){a();e("persona-natural")},agentes:function(){e("agentes")},"default":function(){}};if(h[j]){h[j]()}else{h["default"]()}};return{init:function(h){h.rol=h.rol||"persona-natural";f(h.rol)},destroy:function(){}}},["libs/plugins/jqFancybox-min.js","libs/plugins/jqEasing.js"]);yOSON.AppCore.addModule("session-peruid",function(a){return{init:function(){var b={bxplBtn:$(".bxpl-btn, .bxpl-price a"),peruid:$(".pid_Fb"),pidtrg:$(".fbx_login"),pidlnkMas:$(".go_peruid:eq(0)"),pidlnkDev:$(".pid_Fb:eq(0)")};b.pidtrg.on("click",function(c){c.preventDefault();if(b.pidlnkMas.length){b.pidlnkMas.attr("data-redirect",$(this).attr("href")).trigger("click")}if(b.pidlnkDev.length){b.pidlnkDev.trigger("click")}})},destroy:function(){}}});yOSON.AppCore.addModule("cbo-impress",function(a){var b={cbo:$("input[name='radPackage']"),btn:$("#btn-cboimp")};return{init:function(c){b.btn.on("click",function(g){g.preventDefault();var f=b.cbo.filter(":checked").val(),d=$(this).attr("href");if(typeof f!="undefined"){Cookie.create("impreso",b.cbo.filter(":checked").val());window.location=d}})},destroy:function(){}}});yOSON.AppCore.addModule("destroy-cookie",function(a){return{init:function(b){Cookie.del("impreso")},destroy:function(){}}});yOSON.AppCore.addModule("showTypeAd",function(a){var d={tpAvisoAgente:$("input[name=tpAvisoAgente]")},c=function(e){var f={web:function(){$(".step-impress").animate({width:"0px"},function(){})},impress:function(){$(".step-impress").animate({width:"62px"},function(){})},"default":function(){}};if(f[e]){f[e]()}else{f["default"]}},b=function(){var e=function(f){if(f==1){type="web"}else{type="impress"}return type};if(d.tpAvisoAgente.is(":checked")){c(e(d.tpAvisoAgente.val()))}d.tpAvisoAgente.on("change",function(){var g,f=$(this).val();c(e(f))})};return{init:function(e){b()},destroy:function(){}}});yOSON.AppCore.addModule("valid-step2",function(a){var b={formValidate:$("#formStep2")};return{init:function(c){var d=this;$("#orderPhotos").addClass("ignore");b.formValidate.on("submit",function(){if($("#orderPhotos").val()==""){if($("#noPhotos").length==0){$(".customfile-filename").addClass("error");if(b.formValidate.valid()){$("html,body").animate({scrollTop:$("#photosMissing").offset().top},700,"swing",function(){location.hash="#photosMissing"})}}return false}else{$(".customfile-filename").attr("placeholder","");d.cleanHideInput();return true}})},cleanHideInput:function(){$(".showHide").each(function(c,d){if(!$(d).is(":visible")){utils.resetForm($(d))}})},destroy:function(){}}});yOSON.AppCore.addModule("showHideInputs",function(h){var c={sltransacion:$("#tipoTransac"),sllocalizado:$("#localzdo"),sltipo:$("#tipoInm"),slmoneda:$(".moneda1"),slmoneda2:$(".moneda2"),txtPrice:$("#precio"),txtBedroom:$("#dormtro"),txtBathroom:$("#banio"),txtMbathroom:$("#medioBanio"),txtParking:$("#estacionmto"),txtAreaterreno:$("#areaTerreno"),txtAreaconstruida:$("#areaConstruida"),txtAge:$("#anio"),chkNewhouse:$("#estreno"),txtPhone:$("#telef01"),txtPhone2:$("#telef02"),slUrb:$("#idUrbzn"),slDistrito:$("#idDistrito")},j=function(k){a(k,function(){d();f(c.slmoneda,"tipoMoneda1");f(c.slmoneda2,"tipoMoneda2")});g();b();e();c.sllocalizado.trigger("change",false)},a=function(n,m){var l=function(q){var p="";if(tmp.paquete=="premium"||tmp.paquete=="economico"||tmp.paquete=="normal"){for(var o=0;o<q.length;o++){if(q[o].id!=22){p+='<option data-id="'+q[o].orden+'" value="'+q[o].id+'">'+q[o].nombre+"</option>"}}}else{for(var o=0;o<q.length;o++){p+='<option data-id="'+q[o].orden+'" value="'+q[o].id+'">'+q[o].nombre+"</option>"}}return p},k=function(o){o.on("change",function(t,u){var r=parseInt(c.sltransacion.val()),s=parseInt(c.sllocalizado.val()),q=(typeof u!="undefined")?u:true;if(n=="agentes"){var p="agentes/aviso"}else{p="aviso"}if(q){$.ajax({url:yOSON.baseHost+p+"/tipo-inmueble/lc/"+s+"/tr/"+r,dataType:"json",beforeSend:function(){c.sltipo.attr("disabled","disabled")},success:function(v){c.sltipo.removeAttr("disabled");c.sltipo.html(l(v.data.src));var z=$("#id").val(),y=$("#idRepub").val();if(z!=""&&typeof(z)!="undefined"){c.sltipo.val(tmp.idTipInm)}else{if(y!=""&&typeof(y)!="undefined"){c.sltipo.val(tmp.idTipInm)}else{c.sltipo.children();var x=$("#tipoInm").children();var w=[];$.each(x,function(A,B){w.push($(B).attr("value"))});$.each(w,function(A,B){if(B==5){c.sltipo.val(B)}})}}m&&m()}})}})};k(c.sltransacion);k(c.sllocalizado);c.sltransacion.trigger("change")},d=function(){var o=$(".showHide"),m=[[[[1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0]],[[1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0]],[[0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,0,1,0,1,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]],[[[1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,1,1,1,0,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],[[0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],[[0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,0,1,0,1,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]],[[[1,1,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],[[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,1,1,0,1,0,0,0,0,0,1,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,1,1,0,1,1,0,0,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]],[[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,0,1,0,1,0,0,0,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]]],k=function(r,p){if(typeof r.data("data-inp")=="undefined"){r.data("data-inp",false);
r.addClass("data-inp")}var q=r.data("data-inp");if(!q){r.data("data-inp",p)}},n=function(q,p){for(i=0;i<q.length;i++){if(q[i]==0){$(o[i]).hide();k($(o[i]).parent(),false)}else{if(q[i]==1){$(o[i]).show();k($(o[i]).parent(),true)}}}p&&p()},l=function(p){p.on("change",function(){var r=parseInt(c.sllocalizado.val())-1,q=parseInt(c.sltransacion.val())-1,s=parseInt($("#tipoInm option:selected").attr("data-id"))-1;n(m[r][q][s],function(){$(".data-inp").each(function(t,v){var u=$(v).data("data-inp");(u)?$(v).removeClass("hide"):$(v).addClass("hide");$(v).data("data-inp",false)})})})};l(c.sllocalizado);l(c.sltransacion);l(c.sltipo);c.sltipo.trigger("change")},g=function(){c.chkNewhouse.on("change",function(){if($(this).is(":checked")){c.txtAge.val("");c.txtAge.attr("disabled","disabled")}else{c.txtAge.removeAttr("disabled")}})},f=function(l,k){if(l.is(":hidden")){l.attr("name",k)}else{if(l.is(":visible")){l.attr("name","tipoMoneda")}}},b=function(){var l,o=$(".list-chk li"),m=o.clone(),n=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,1,1,0,0,1,1,0,1,1,1,0,1,0,0,0,0,0,0,0,0,1,0,0],[0,1,0,0,1,1,1,0,0,1,1,0,1,1,1,0,1,0,0,0,0,0,0,0,0,1,0,1]],p=function(r,q){for(l=0;l<r.length;l++){if(r[l]==0){$(m[l]).hide()}else{if(r[l]==1){$(m[l]).show()}}}q&&q()},k=function(){$(".list-chk li").filter(":hidden").remove()};c.sllocalizado.on("change",function(){var r=$(this),q=parseInt(r.val())-1;$(".list-chk").html(m);p(n[q],k)})},e=function(){var k=c.slUrb.parents(".control-group").find(".control-label");c.sllocalizado.on("change",function(){if($(this).val()==3){k.text("Balneario")}else{k.text("Urbanización")}c.slDistrito.trigger("change")})};return{init:function(k){j(k.rol)},destroy:function(){}}});yOSON.AppCore.addModule("maps-step2",function(a){var c={mapa:"map",hLat:"lat",hLng:"lng",geocodeOpts:{address:"Lima, Peru",useMarker:"ubigeo",callback:function(k,j,h){if(j==="OK"){e(k,j,h)}}}},f={},d=function(){f.mapa=$("#"+c.mapa);f.hLat=$("#"+c.hLat);f.hLng=$("#"+c.hLng)},g=function(){var j=new gMap(c.mapa);j.f({zoom:12});j.marker({id:"ubigeo",title:"Indica donde se encuentra el inmueble",draggable:true,evts:{dragend:function(n){var l=this.get("map"),m=this.getPosition();l.panTo(m);b(m)}}});var h=$.trim(f.hLat.val())||0,k=$.trim(f.hLng.val())||0;if(parseInt(h)===0&&parseInt(k)===0){j.geocode(c.geocodeOpts)}else{j.onLoadAsyncLib({callback:function(){var m=j.getMarker("ubigeo"),l=j.map,n=j.latLng(f.hLat.val(),f.hLng.val());m.setPosition(n);l.setCenter(n)}})}j.onLoadAsyncLib({callback:function(){a.trigger("extendMapGeocodeCombos",[j,c.hLat,c.hLng])}})},e=function(k,j,h){var l=k[0].geometry.location,m=new h.gmap.nspace.LatLng(l.lat(),l.lng());b(l);h.gmap.map.setCenter(m);h.marker.setPosition(m);h.marker.setMap(h.gmap.map)},b=function(h){document.getElementById(c.hLat).value=h.lat();document.getElementById(c.hLng).value=h.lng()};return{init:function(){d();g()},destroy:function(){}}},["libs/plugins/gmapec.js"]);yOSON.AppCore.addModule("select-geocode",function(n){var p={slcDepartamento:"#idDpto",slcProvincia:"#idProvin",slcDistrito:"#idDistrito"},g={},f={},b=function(){f.slcDepartamento=$(p.slcDepartamento);f.slcProvincia=$(p.slcProvincia);f.slcDistrito=$(p.slcDistrito);n.events(["extendMapGeocodeCombos"],o,this)},o=function(q,s,r){p.objMap=q;p.hLat=s;p.hLng=r},e=function(){f.slcDepartamento.on("change",m);f.slcProvincia.on("change",h);f.slcDistrito.on("change",a)},m=function(q){var s=$(this),r=$(this).find(":selected");g={};g.departamento=s.val()!==""?r.text():"";k()},h=function(q){var s=$(this),r=$(this).find(":selected");g.provincia=s.val()!==""?r.text():"";if(g.departamento===g.provincia){g.departamento=g.provincia;g.provincia=""}k()},a=function(q){var s=$(this),r=$(this).find(":selected");g.distrito=s.val()!==""?r.text():"";k()},k=function(){var q=j();p.objMap.geocode({address:q+",Perú",useMarker:"ubigeo",callback:function(t,s,r){if(s==="OK"){c(t,s,r)}}})},c=function(s,r,q){var t=s[0].geometry.location,u=new q.gmap.nspace.LatLng(t.lat(),t.lng());l(t);q.gmap.map.panTo(u);q.marker.setPosition(u);q.marker.setMap(q.gmap.map)},l=function(q){document.getElementById(p.hLat).value=q.lat();document.getElementById(p.hLng).value=q.lng()},d=function(){return p.geocodeOpts},j=function(){var q=[];for(var r in g){if(g[r]!==""){q.push(g[r])}}return q.toString()};return{init:function(){b();e()},destroy:function(){}}});yOSON.AppCore.addModule("select-depends",function(b){var d=function(f){return $(f).parents("form:eq(0)").find('[type="submit"]')};var a=function(f,g){return f.replace(/\$([0-9]+)/gi,function(j,h){return g[parseInt(h)]})};var c=function(f,g){$.ajax({url:yOSON.baseHost+f,type:"get",dataType:"json",success:g})};var e={};return{clsBtn:false,init:function(q){var p=selectDepends[q[0]],f=p.length,h=0,g=1,s=this;while(h<f){var n=$(p[h].ids[0]),m=$(p[h].ids[1]),v=p[h].ids[0],t=p[h].ids[1],u=null;if(typeof p[h].callback!="undefined"){u={before:p[h].callback.before||null,after:p[h].callback.after||null}}e[v]=[t];for(var g=h+1;g<f;g++){var r=p[g].ids[0];var o=p[g].ids[1];var k=e[v][e[v].length-1];if(k==r){e[v].push(o)}}this.clsBtn=$(d(n)).hasClass("btn");n.bind("change",(function(j,l,w){return function(B,C){var z=$.trim($("option:selected",this).val()),y=$(e["#"+this.id].join(",")),x=s.chargeVals(p[j],z);if(z==""||z=="-1"){y.html("").append('<option value="">No hay registros</option>');return}y.prop("disabled",true);d(this).prop("disabled",true).addClass((s.clsBtn?"":"btn ")+"disabled");var A=a(p[j].url,x);if(w){w.before&&w.before()}c(A,function(D){s.success(l,C,arguments[2])(D);if(w){w.after&&w.after(D)}})}})(h++,m,u))}},chargeVals:function(l,k){var g={"0":k},f=[];if(typeof l.routes!="undefined"){for(var h in l.routes){g[h]=l.routes[h]&&l.routes[h]()}}for(var j in g){if(g.hasOwnProperty(j)&&!isNaN(+j)){f[+j]=g[j]}}return f},success:function(g){var h=this;var f=arguments;return function(j){g.prop("disabled",false).html("").parent().children("label.error").remove();d(g).prop("disabled",false).removeClass((h.clsBtn?"":"btn ")+"disabled");utils.validAjax(j,{success:function(m){var l=m.data.src;$.each(l,function(n,p){for(var o in p){g.append($('<option value="'+o+'">'+p[o]+"</option>").attr("selected",(o==f[1])))}});g.css("border-color","#CCC").trigger("change",[f[2]]).parent().children("label.error").remove();var k=g.data("onSuccessLoadB");k&&k()},error:function(l){g.append('<option value="">No hay registros</option>').trigger("change",[f[2]]).attr("disabled",true);var k=g.data("onErrorLoadB");k&&k()}})}},destroy:function(){}}},["data/selects.js"]);yOSON.AppCore.addModule("uploaderImages-step2",function(l){var g={canvasImages:$("#uploaderImages"),formUploader:$("#formStep2"),inputFile:$("#imageUploader"),orderPhotos:$("#orderPhotos"),btnUploader:$("#btnUploader"),uploaderLoadingGroup:$("#uploaderLoadingGroup")},k='<div id="bannerImportant">Foto Portada</div>',c=tmp.limitPhotos,n=$(".message",g.canvasImages),j=function(o){n.html(o)},e=function(){g.inputFile.customFile()},b=function(s,o){var q=0,p=[],r="",t="",v=g.orderPhotos.val();if(v!=""){p=v.split("|")}var u={add:function(){p.push(o);if(tmp.limitPhotos==p.length){$("button.customfile-upload").attr("disabled","disabled").removeClass("btn-urb").addClass("btn-gray");warn("Solo puede subir un máximo de "+tmp.limitPhotos+" fotos")}},remove:function(){var w=$.inArray(o,p);p.splice(w,1);if(p.length==0){$(".customfile-filename").attr("placeholder","No se han cargado Imagenes")}if(tmp.limitPhotos>p.length){$("button.customfile-upload").removeAttr("disabled").removeClass("btn-gray").addClass("btn-urb")}if(tmp.limitPhotos>c){c=c+1}},order:function(){p=[];for(var w=0;w<o.length;w++){p.push($(o[w]).attr("data-id"))}},edit:function(){p=[];for(var w=0;w<o.length;w++){p.push(o)}},"default":function(){}};if(u[s]){u[s]()}else{u["default"]()}t=p.join("|");g.orderPhotos.attr("value",t)},d=function(p){var o=p.split(".");return o[0]},a=function(o){if(typeof(o)=="undefined"||o==""){o=0}setTimeout(function(){var p=$("#uploaderImages").children(".preview")[0];
if($(p).find("#bannerImportant").length==0){$(p).append(k)}},o)},h=function(){var p="",u=".jpg",r="",q={frm:"formStep2",onComplete:function(w){g.uploaderLoadingGroup.fadeOut("slow");var w=$.parseJSON(w);for(var v=0;v<w.data.src.length;v++){c--}$(".customfile-filename").attr("placeholder","").removeClass("error");g.formUploader.attr("action","");g.formUploader.attr("target","");if(w.data.state[0]==0){warn(w.data.msg)}else{$.each(w.data.src,function(y,z){if(w.data.src[y].state==1){dataId=d(w.data.src[y].img);g.canvasImages.append('<div class="preview" data-id="'+dataId+'"><a class="btn-closebox btn-delete" href="javascript:;"></a><span class="imageHolder"><img class="preview-img" src="'+yOSON.baseHost+"elements/tmp/"+w.data.src[y].img+'" /></span></div>');b("add",dataId)}else{warn(w.data.src[y].msg)}})}var x=$("#uploaderImages").children(".preview")[0];if($(x).find("#bannerImportant").length==0){$(x).append(k)}}},t=function(){g.uploaderLoadingGroup.fadeIn("slow");setTimeout(function(){g.formUploader.attr("action",yOSON.baseHost+"aviso/upload-image-temporal-notice/amount/"+c);$.fn.iframeUp("submit",q);g.inputFile.val("");$(".customfile-filename").val("")},900)},s=function(v){$contentImages=document.getElementById("uploaderImages");g.canvasImages.append('<div id="messagesDrop">Arrastre sus imagenes aqui</div>');$contentImages.addEventListener("dragover",function(w){w.preventDefault();g.canvasImages.addClass("dropOver");$("#messagesDrop").addClass("hidde-msg")},false);$contentImages.addEventListener("dragleave",function(x){x.preventDefault();g.canvasImages.removeClass("dropOver");var w=$("#uploaderImages").children(".preview");if(w.length==0){$("#messagesDrop").removeClass("hidde-msg")}},false);$contentImages.addEventListener("drop",function(x){x.preventDefault();g.canvasImages.removeClass("dropOver");$("#messagesDrop").addClass("hidde-msg");var w=x.dataTransfer.files;$.each(w,function(z,A){var y=new FileReader();y.onload=(function(B){return function(C){g.canvasImages.append('<div class="preview" data-id="'+i+'"><a class="btn-closebox btn-delete" href="javascript:;"></a><span class="imageHolder"><img class="preview-img" src="'+this.result+'" /></span></div>')}})(w[z]);y.readAsDataURL(A)});v&&v()})};if(window.File&&window.FileReader&&window.FileList&&window.Blob){var o=document.getElementById("imageUploader");o.addEventListener("change",function(y){var x=y.target.files,v=false;if(x.length==0){warn("Debe seleccionar un archivo");v=true}else{for(var w=0,z;z=x[w];w++){if(!(/\.(jpg|jpeg|bmp|png|gif)$/i).test(z.name)){warn(" El tipo de archivo seleccionado no es una imagen");v=true}else{if(z.size>=2097152){warn("El tamaño de la Imagen debe ser menor o igual a 2 Mb");v=true}}}}if(!v){t()}else{g.inputFile.val("");$(".customfile-filename").val("")}},false)}else{g.inputFile.on("change",function(){if(g.inputFile.val()!=""&&g.inputFile.val()!="undefined"){t()}else{warn("Debe de seleccionar un archivo")}})}},m=function(o){g.canvasImages.on("click",".btn-delete",function(r){r.preventDefault();var s=$(this),q=s.parent(),p=d(q.attr("data-id"));q.fadeOut(400,function(){$.ajax({type:"GET",url:yOSON.baseHost+"aviso/delete-image-temporal-notice/id/"+p,success:function(t){var t=$.parseJSON(t);if(t.data.state[0]==1){q.remove()}o&&o()}})});b("remove",p)})},f=function(){g.canvasImages.sortable({cursor:"move",opacity:0.5,update:function(p,q){if($(q.item).find("#bannerImportant")){$("#bannerImportant",this).remove()}var o=$(this).children(".preview")[0];$(o).append(k);b("order",g.canvasImages.children(".preview"))}});g.canvasImages.disableSelection()};return{init:function(o){e();m(function(){a()});h();f();var p=g.orderPhotos.val().split("|");if(g.orderPhotos.val()==""){b("edit",p)}else{c=c-p.length}},destroy:function(){}}},["libs/plugins/jqUICore.js","libs/plugins/jqUISortable.js","libs/plugins/jqCustomfile.js","libs/plugins/jqIframeup.js"]);yOSON.AppCore.addModule("count-characters",function(a){return{init:function(c){var d=c[0],f=$(c[1]),b=c[2],e="";utils.vLength(d,b,function(g){e=(g<=b)?(b-g):0;f.text(e)});$(d).trigger("keyup")},destroy:function(){}}});yOSON.AppCore.addModule("add-more-words",function(a){var b={radMedio:$("#radMedio1, #radMedio2")};return{init:function(){var d,c;b.radMedio.on("click",function(){d=$(this);a.trigger("returnInstCountAds",[function(e){var f=d.val();if(f==2){c=11}else{if(f==3){c=17}}window[e]=c;$("#txaAdvImpreso").trigger("keyup")}])})},destroy:function(){}}});yOSON.AppCore.addModule("ads-publication",function(a){var c=this,b={act:$(".advi-act"),txtarea:$("#txaAdvImpreso"),count:$("#advi-num"),span:$(".advi-content span")};c.instCountAds=null;a.events(["returnInstCountAds"],function(d){d&&d(c.instCountAds)},this);return{init:function(d){var f=0,e=tmp.palabrasLibresCant,g;b.act.bind("click",function(){var h=$.trim(b.txtarea.val());b.txtarea.val(h);$(this).hide();b.txtarea.focus()});b.txtarea.bind("blur",function(){var h=$.trim($(this).val());if(h==""){b.act.show()}});b.txtarea.on("keypress scroll",function(){if($(this).scrollTop()>0){b.span.hide()}else{b.span.show()}});g=utils.vLetter("#txaAdvImpreso",{len:parseFloat(tmp.palabrasLibresCant),callback:function(h,k,j){e=window[j]||e;f=(parseFloat(h)>=e)?e:parseFloat(h);b.count.text(e-f)}});utils.blockInpLen("#txaAdvImpreso",15,false,function(){if(b.txtarea.scrollTop()>0){b.span.hide()}else{b.span.show()}});c.instCountAds=g;if(b.txtarea.val()!=""){b.act.hide();b.txtarea.trigger("keyup")}}}});yOSON.AppCore.addModule("add-highlight",function(a){var b={stotal:$(".sub-price span"),total:$(".total-price span"),chkprice:$(".add-hlight")};return{init:function(d){var f=parseFloat(b.stotal.text().replace("S/.",""))*Math.pow(10,2),e,c,g;b.chkprice.bind("click",function(){e=parseFloat($(this).attr("dt-price"))*Math.pow(10,2);f=($(this).is(":checked"))?f+e:f-e;c=(f/Math.pow(10,2)).toFixed(2);b.total.text("S/."+c);g=($(this).is(":checked"))?parseFloat($(this).attr("dt-price")).toFixed(2):"0.00";$(this).parent().find(".price-right").text("S/. "+g)})},destroy:function(){}}});yOSON.AppCore.addModule("comprobante-step4",function(a){var b={radioDoc:":input[name=radTipoComprobante]",idRadioBoleta:"radBoleta",idRadioFactura:"radFactura",launcherNuevoDoc:"#nuevo-doc",strLauncherNoClicked:"Añadir Nuevo RUC",strLauncherClicked:"Elegir un RUC registrado",sectionBoleta:"#section-boleta",sectionFactura:"#section-factura",sectionNuevoRegistro:"#section-nuevo",slcRazonSocial:"#selPerfilPago",radioEvts:{onCheckedBoleta:function(){g.sectionBoleta.show();if(g.sectionNuevoRegistro.is(":visible")){g.launcherNuevoDoc.trigger("click",{clicked:true})}},onUncheckedBoleta:function(){g.sectionBoleta.hide()},onCheckedFactura:function(){g.sectionFactura.show()},onUncheckedFactura:function(){g.sectionFactura.hide()}}},g={},d=function(){g.radioDoc=$(b.radioDoc);g.sectionBoleta=$(b.sectionBoleta);g.sectionFactura=$(b.sectionFactura);g.launcherNuevoDoc=$(b.launcherNuevoDoc);g.sectionNuevoRegistro=$(b.sectionNuevoRegistro);g.slcRazonSocial=$(b.slcRazonSocial)},h=function(j){if(j=="persona-natural"){c(b.idRadioBoleta,b.radioEvts)}else{if(j=="agentes"){c(b.idRadioFactura,b.radioEvts)}}g.radioDoc.on("change",e);g.launcherNuevoDoc.on("click",{clicked:false},f)},e=function(j){c(j.currentTarget.id,b.radioEvts)},c=function(l,j){var k={};k[b.idRadioBoleta]={unchecked:function(){j.onUncheckedBoleta&&j.onUncheckedBoleta()},checked:function(){k[b.idRadioFactura].unchecked();j.onCheckedBoleta&&j.onCheckedBoleta()}};k[b.idRadioFactura]={unchecked:function(){j.onUncheckedFactura&&j.onUncheckedFactura()},checked:function(){k[b.idRadioBoleta].unchecked();j.onCheckedFactura&&j.onCheckedFactura()}};return k[l].checked()},f=function(j){if(j.data.clicked){g.sectionNuevoRegistro.hide();$(j.currentTarget).html(b.strLauncherNoClicked);g.slcRazonSocial.removeAttr("disabled");j.data.clicked=false}else{g.sectionNuevoRegistro.show();g.sectionNuevoRegistro.find(":input").val("");$(j.currentTarget).html(b.strLauncherClicked);g.slcRazonSocial.attr("disabled","disabled");g.slcRazonSocial.find("option[value=0]").prop("selected",true);
j.data.clicked=true}};return{init:function(j){d();h(j.rol)},destroy:function(){}}});yOSON.AppCore.addModule("validacion-step4",function(j){var m={frmComprobante:"#frm-comprobante",txtRUC:":input[name=txtRuc]",txtDNI:":input[name=txtDni]",txtApellidoNombre:":input[name=txtApellidoNombre]",txtNombre:":input[name=txtNombre]",txtApeMaterno:":input[name=txtApeMaterno]",txtApePaterno:":input[name=txtApePaterno]",txtRazonSocial:":input[name=txtRazonSocial]",txtDireccion:":input[name=txtDireccion]",selTipoVia:":input[name=selTipoVia]",selDepartamento:":input[name=selDepartamento]",selProvincia:":input[name=selProvincia]",selDistrito:":input[name=selDistrito]",hfromAdecsys:":input[name=hidAdecsys]"},c={},a=function(){c.frmComprobante=$(m.frmComprobante);c.txtRUC=$(m.txtRUC);c.txtDNI=$(m.txtDNI);c.txtApellidoNombre=$(m.txtApellidoNombre);c.txtNombre=$(m.txtNombre);c.txtApeMaterno=$(m.txtApeMaterno);c.txtApePaterno=$(m.txtApePaterno);c.txtRazonSocial=$(m.txtRazonSocial);c.txtDireccion=$(m.txtDireccion);c.selTipoVia=$(m.selTipoVia);c.selDepartamento=$(m.selDepartamento);c.selProvincia=$(m.selProvincia);c.selDistrito=$(m.selDistrito);c.hfromAdecsys=$(m.hfromAdecsys)},b=function(o){if(o=="agentes"){c.frmComprobante.validate();c.txtDNI.rules("add",{required:true,messages:{required:"Es requerido."}})}else{if(o=="persona-natural"){c.txtDNI.rules("remove","required")}}c.txtRUC.on("keyup.RUC",h);var n=null;e(c.txtRUC,{paste:function(p){setTimeout(function(){h(p)},300)},cut:function(p){h(p)}});c.txtApellidoNombre.data("namePerDefault",c.txtApellidoNombre.val());c.txtDNI.keyup(k);e(c.txtDNI,{paste:function(p){setTimeout(function(){k(p)},300)},cut:function(p){k(p)}})},h=function(n){var o=n.currentTarget,q=o.value,p=null;if(!$(o).hasClass("paste")){p=f(n)}else{p=true}if(c.frmComprobante.validate().element(m.txtRUC)&&p){$(o).data("completelength",true);$(o).removeClass("paste");$.ajax({dataType:"json",url:yOSON.baseHost+"perfilpago/validar-cliente-adecsys/tipDoc/RUC/numDoc/"+q,success:function(r){c.frmComprobante.validate().resetForm();var s=r.data.src;if(r.data.msg==="noResults"){c.hfromAdecsys.val(0);c.hfromAdecsys.attr("value",0);d()}else{c.hfromAdecsys.val(1);c.hfromAdecsys.attr("value",1);g(c.txtNombre,s.Pre_Nom,true);g(c.txtApePaterno,s.Ape_Pat,true);g(c.txtApeMaterno,s.Ape_Mat,true);g(c.txtRazonSocial,s.RznSoc_Nombre,true);l(c.selTipoVia,s.Tip_Calle,true);g(c.txtDireccion,s.Nom_Calle,true);l(c.selDepartamento,s.idDepartamento,true);c.selProvincia.data("onSuccessLoadB",function(){l(c.selProvincia,s.idProvincia,true)});c.selDistrito.data("onSuccessLoadB",function(){l(c.selDistrito,s.idDistrito,true)});c.selDepartamento.trigger("change",[s.idProvincia,s.idDistrito])}},error:function(){}})}else{if(q.length<11){$(o).removeData("completelength");d()}}},d=function(){g(c.txtNombre,"");g(c.txtApePaterno,"");g(c.txtApeMaterno,"");g(c.txtRazonSocial,"");l(c.selTipoVia,"");g(c.txtDireccion,"");l(c.selDepartamento,"");l(c.selProvincia,"");l(c.selDistrito,"");c.selProvincia.removeData("onSuccessLoadB");c.selDistrito.removeData("onSuccessLoadB")},f=function(o){var n=false,p=(window.event)?o.which:o.keyCode;if((p>=48)&&(p<=57)||(p>=96)&&(p<=105)||(p===13)){$(o.currentTarget).removeClass("paste").removeClass("cut");n=true}return n},k=function(n){var o=n.currentTarget,q=o.value,p=null;if(!$(o).hasClass("paste")){p=f(n)}else{p=true}if(q.length===0){g(c.txtApellidoNombre,c.txtApellidoNombre.data("namePerDefault"))}if(q.length===8&&p){$(o).removeClass("paste");$.ajax({dataType:"json",url:yOSON.baseHost+"perfilpago/validar-cliente-adecsys/tipDoc/DNI/numDoc/"+q,success:function(r){c.frmComprobante.validate().resetForm();var s=r.data.src;if($.trim(s.RznSoc_Nombre)){g(c.txtApellidoNombre,s.RznSoc_Nombre)}else{g(c.txtApellidoNombre,c.txtApellidoNombre.data("namePerDefault"))}}})}},g=function(q,o,p){var n=(typeof p==="undefined")?false:true;if((o&&o!=="")||n){q.attr("value",o);q.val(o);q.attr("title",o);q.addClass("disabled");q.attr("disabled","disabled")}else{q.removeAttr("value");q.val("");q.removeAttr("title");q.removeAttr("disabled");q.removeClass("disabled")}},l=function(q,o,p){var n=(typeof p==="undefined")?false:true;q.find("option").removeAttr("selected");if((o&&o!=="")||n){q.find("option[value='"+o+"']").prop("selected",true);q.val(o);q.prop("disabled",true)}else{q.prop("disabled",false)}},e=function(o,n){o.bind({paste:function(p){o.removeClass("cut").addClass("paste");n.paste&&n.paste(p)},cut:function(p){o.removeClass("paste").addClass("cut");n.cut&&n.cut(p)},focus:function(p){o.removeClass("cut").addClass("paste");n.focus&&n.focus(p)},blur:function(p){o.removeClass("cut").addClass("paste");n.blur&&n.blur(p)}})};return{init:function(n){a();b(n.rol)},destroy:function(){}}},["libs/plugins/jqValidate-min.js"]);yOSON.AppCore.addModule("registrar-nuevo-ruc",function(b){var c={inputRUC:"#txtRuc",wpNatural:"#datosPersonales",wpJuridica:"#razonSocial"},g={},e=function(){g.inputRUC=$(c.inputRUC);g.wpNatural=$(c.wpNatural);g.wpJuridica=$(c.wpJuridica)},h=function(){g.inputRUC.on("keyup",d)},d=function(k){var j=g.inputRUC.val();if(parseInt(j.substr(0,1))===1){a(1);f(0)}else{a(0);f(1)}},a=function(j){if(j===1){g.wpNatural.slideDown()}else{g.wpNatural.slideUp()}},f=function(j){if(j===1){g.wpJuridica.slideDown()}else{g.wpJuridica.slideUp()}};return{init:function(){e();h()},destroy:function(){}}});yOSON.AppCore.addModule("add-ruc-facturacion",function(a){var c={indexTable:"td.tdOrd"},g={},d=function(){g.indexTable=$(c.indexTable)},h=function(k,l,j){e();b(k,l,j)},b=function(k,l,j){$("#tabla").on("click",".eliminar",function(){var m=$(this).parent();$.confirm({title:k,answer:l,callback:function(n){if(n){var o=m.attr("id");$.ajax({url:yOSON.baseHost+j+o,dataType:"json",beforeSend:function(){},success:function(p){if(p.data.state===1){m.remove();f()}else{warn(p.data.msg,5000)}},error:function(){warn("No se puedo eliminar.",5000)}})}}})})},f=function(){var j=1;if($(c.indexTable).length){$(c.indexTable).each(function(k,l){$(l).html(j);j++})}},e=function(){$("#goForm").scrollWindow()};return{init:function(j){d();h(j.title,j.question,j.urlAjax)}}},["libs/plugins/jqFancybox-min.js","backbone/libs/underscore/underscore.js","libs/plugins/jqConfirm.js"]);yOSON.AppCore.addModule("show-more-step4",function(a){var c={strongLetter:$("#strongLetter"),headerLetter:$("#headerLetter")},b={strongLetter:{title:"Negrita",msg:'<strong id="exampleAvisoImpreso">Paita 4dorm. (Piura). Se Vende Casa Habitación, desocupada, AT.226.05m2 AC180m2 en Av.San Martín. Ideal para Hotel y Comercio en General. Comunicarse al C. 997-937-266.</strong>'},headerLetter:{title:"Encabezado Simple",msg:'<p id="exampleAvisoImpreso"><span>SOL DE LA MOLINA</span>4dorm. Condominio 3casas, A.C.260m2; 2coch, acab./lujo, Kontiki 281, alt.cdra.10 Acapulco, T.719-5140, 719-5141</p>'}},d=function(f,e){f.on("click",function(h){h.preventDefault();var j=$(this),g=e,k='<div id="example-detail" ><h2 class="urb-stitle">'+g.title+"</h2>"+g.msg+"</div>";$.fancybox.showLoading();setTimeout(function(){$.fancybox({type:"html",openEasing:"easeOutBack",closeEasing:"easeInBack",openSpeed:500,closeSpeed:500,openEffect:"elastic",closeEffect:"elastic",autoSize:false,width:350,height:140,afterLoad:function(){$.fancybox.hideLoading()},content:k})},0)})};return{init:function(){d(c.strongLetter,b.strongLetter);d(c.headerLetter,b.headerLetter)}}},["libs/plugins/jqFancybox-min.js"]);yOSON.AppCore.addModule("lightboxPagoEfectivo",function(a){return{init:function(){var b=this;$(".fancybox-effects-d").fancybox({padding:0,openEasing:"easeOutBack",closeEasing:"easeInBack",openSpeed:500,closeSpeed:500,openEffect:"elastic",closeEffect:"elastic",title:null,scrolling:null,fitToView:false,autoSize:false,width:550,height:770,beforeLoad:function(){b.videoPE()}})},videoPE:function(){function c(){if(!!document.createElement("video").canPlayType){var g=document.createElement("video");var f=g.canPlayType('video/ogg; codecs="theora, vorbis"');if(!f){h264Test=g.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');
if(!h264Test){return false}else{if(h264Test=="probably"){return true}else{return false}}}else{if(f=="probably"){return true}else{return false}}}else{return false}}if(c()!=true){var e={},b={},d=yOSON.statHost;e.allowscriptaccess="always";e.allowfullscreen="true";e.wmode="opaque";e.flashvars="file="+d+"video/1.flv&repeat=no&stretching=fill&skin="+d+"swf/md.swf&autostart=false&bufferlength=1&image="+d+"video/1.jpg";swfobject.embedSWF(""+d+"swf/playertv.swf","pagoefectivo-video","500","300","9",""+d+"swf/expressInstall.swf",b,e)}}}},["libs/plugins/jqFancybox-min.js","libs/plugins/swfobject.js","libs/plugins/jqEasing.js"]);yOSON.AppCore.addModule("add-video",function(j){var l={txt:"txtVideo",btnAdd:"btnAddVideo",list:"olVideoList",remove:"remove",tpl:"tplUrlVideo",template:null,counter:0,limit:2,validation:/(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,urlYtPrefix:"http://gdata.youtube.com/feeds/api/videos/",deleteUrl:yOSON.baseHost+"aviso/delete-video-notice/"},b=[],e={},a=function(){e.txt=$("#"+l.txt);e.btnAdd=$("#"+l.btnAdd);e.list=$("#"+l.list);e.remove=$("."+l.remove);e.tpl=$("#"+l.tpl)},d=function(){e.btnAdd.on("click",function(p){var o=e.txt.val();if(!o.match(l.validation)){warn("Por favor ingrese un video válido de Youtube.");return false}var q=o.match(l.validation),n=l.urlYtPrefix+encodeURIComponent(q[3]),m=q[3];if(b.length>(l.limit-1)){warn("El número máximo permitido es de "+l.limit+" videos.");e.txt.val("");return false}if(g(m)){k(n,m)}})},g=function(m){if(b.length>0){if(c(m)>-1){warn("Usted ya ingresó este video.");e.txt.val("").attr("placeholder","Ingrese una nueva url de video");return false}else{return true}}return true},k=function(n,m){$.ajax({url:n,data:"v=2&alt=json&callback=?",type:"GET",cache:false,dataType:"json",success:function(o){b.push({vid:m,title:o.entry.title.$t,preview:o.entry.media$group.media$thumbnail[0].url,height:65,width:90});var p=_.template(l.template),q=$(p(_.last(b)));if(e.list.hasClass("slvzr-empty")){e.list.removeClass("slvzr-empty")}e.list.append(q);e.txt.val("").attr("placeholder","Ingrese la url del video");q.on("click",".remove",function(r){var t=$(r.currentTarget).parent(),s=$("#id").val();if(!tmp.videos){b.splice(c(m),1);t.fadeOut().remove();return true}else{$.ajax({url:l.deleteUrl+"id/"+m+"/media/"+s,type:"GET",dataType:"json",success:function(u){if(u.session.state==1){if(u.data.state==1){b.splice(c(m),1);success(u.data.msg);t.fadeOut().remove();return true}else{warn(u.data.msg);return false}}else{warn(u.session.msg);return false}},error:function(w,u,v){warn("La acción solicitada no ha podido concretarse, por favor intentelo más tarde.");return false}})}})},error:function(q,o,p){warn("El video solicitado no existe.")}})},c=function(m){var o=-1;for(var n=0;n<b.length;n++){if(b[n].vid==m){o=n}}return o},f=function(){l.template=l.template||$.trim(e.tpl.html())},h=function(){if(tmp.videos){for(var m=0;m<tmp.videos.length;m++){k(l.urlYtPrefix+tmp.videos[m],tmp.videos[m])}tmp.videos=[]}};return{init:function(){a();f();d();h()},destroy:function(){}}},["backbone/libs/underscore/underscore.js"]);yOSON.AppCore.addModule("datepicker",function(a){var b={range:function(e){var d={from:null,to:null},c=$.extend(d,e),g=c.from,f=c.to;if(g!=null&&f!=null){if(typeof g=="string"){$(g).datepicker({minDate:0,numberOfMonths:2,dateFormat:"dd/mm/yy",onClose:function(h){$(f).datepicker("option","minDate",h)}});$(f).datepicker({minDate:0,numberOfMonths:2,dateFormat:"dd/mm/yy",onClose:function(h){$(g).datepicker("option","maxDate",h)}})}}}};return{init:function(c){var e=datepicker[c[0]];for(var d in e){b[d](e[d])}},destroy:function(){}}},["libs/plugins/jqUICore.js","libs/plugins/jqDatepicker.js","data/datepicker.js"]);yOSON.AppCore.addModule("infinite-scroll",function(a){var b=this;b.inst=null;a.events(["returnInst"],function(c){c&&c(b.inst)},this);return{init:function(c){var e={el:".tbl-admin tbody",tag:"tr",btn:".btn-vermas",frecuency:10,limit:20,callback:{success:function(g){return g.data.src}}},d=$.extend(e,infScroll[c[0]]),f=$("#wrapper").Scrollaize(d);b.inst=f}}},["backbone/libs/underscore/underscore.js","libs/plugins/jqScroll.js","data/scroll.js"]);yOSON.AppCore.addModule("prueba-scroll",function(a){var b=this;b.inst=null;a.events(["returnInst"],function(c){c&&c(b.inst)},this);return{init:function(c){var e={el:".tbl-admin tbody",tag:"tr",btn:".btn-vermas",frecuency:20,table:true,limit:20,callback:{success:function(g){return g.data.src}}},d=$.extend(e,infScroll[c[0]]),f=$("#wrapper").Scrollaize(d);b.inst=f},destroy:function(){}}},["backbone/libs/underscore/underscore.js","libs/plugins/jqScroll2.js","data/scroll.js"]);yOSON.AppCore.addModule("tbl-order",function(a){var c=this,d={order:null},b={scroll:function(f,e){a.trigger("returnInst",[function(k){var l=k,g=l.settings,j=g.ajax,h;j[e.pData]=function(){return e.data};j[e.pOrder]=function(){return e.order};g.ajax=j;h=l.convertData(g.ajax);h[e.pTotal]=b.numTotal(l.arquitect.regs.length);h[e.pCond]=true;b.ajax(g.url,h,{success:function(m){l.fetch(m.data.src,m.extra.totalPagos)},error:function(){warn("Ocurrió un error en la petición. Inténtelo de nuevo.")}})}])},render:function(g){var f=_.template($(g.tmpl).html()),l=g.pData,e=g.pOrder,j=g.pCond,h=g.pTotal,k={pdata:g.data,porder:g.order,pcond:true,ptotal:$(g.target).length};b.ajax(yOSON.baseHost+g.url,k,{success:function(m){$(g.target).each(function(n,o){$(o).html(f(m.data.src[n]))})},error:function(){warn("Ocurrió un error en la petición. Inténtelo de nuevo.")}})},ajax:function(e,g,h){var f=$("#wrapper");utils.loader(f,true);$.ajax({url:e,data:g,dataType:"json",type:"GET",success:function(j){utils.loader(f,false);h.success&&h.success(j)},error:function(j,l,k){utils.loader(f,false);h.error&&h.error(j,l,k)}})},numTotal:function(f){var e=f%20,g=(e!=0)?((f-e)/20)+1:f/20;return g*20}};c.opts={module:false,url:"",context:".tbl-order",el:".down,.up",pTotal:"p1",pData:"p2",pOrder:"p3",pCond:"ord",target:".tbl-admin tbody tr",tmpl:"#tplTrPaid"};a.events(["order-tbl"],function(e){e&&e(b,c.opts)},this);return{init:function(f){var h,g,e;c.opts=$.extend(c.opts,f[0]);d.order=$(c.opts.context).find(c.opts.el);d.order.bind("click",function(j){j.preventDefault();h=$(this);if(!h.hasClass("act")){d.order.removeClass("act");h.addClass("act");c.opts.data=h.parent().attr("data");c.opts.order=(h.hasClass("down"))?"desc":"asc";(c.opts.module)?b.scroll(a,c.opts):b.render(c.opts)}})},destroy:function(){}}},["backbone/libs/underscore/underscore.js"]);yOSON.AppCore.addModule("tbl-actions",function(a){var c={"delete":function(){var f=this,e=f.attr("href"),d;this.on("click",function(g){g.preventDefault();d=confirm("¿Esta seguro que desea eliminar?");if(d){window.location=e}})},givedown:function(){var f=this,e=f.attr("href"),d;this.on("click",function(g){g.preventDefault();d=confirm("¿Esta seguro que desea dar de baja al anuncio?");if(d){window.location=e}})}},b=function(f,d){for(var e=0;e<=d.length;e++){c[d[e]]&&c[d[e]].call(f)}};return{init:function(d){var g=d[0]||$(".tbl-admin tbody tr"),e=d[1]||".action-icons",f;g.find(e).each(function(h,j){f=$(j).attr("class").split(/\s+/);b($(j),f)})},destroy:function(){}}});yOSON.AppCore.addModule("validate-alerts-form",function(a){var g={formAlert:$("#formAlert"),chksInmueble:$("#chksInmueble"),radOperacion:$("#radOperacion"),radUbicada:$("#radUbicada"),errorRadOperation:$("#errorRadOperation"),errorRadUbicada:$("#errorRadUbicada"),errorChkInmueble:$("#errorChkInmueble"),errorRadFrecuencia:$("#errorRadFrecuencia"),allRadOperacion:$("input[name=radOperacion]"),allRadUbicada:$("input[name=radUbicada]"),allChksInm:$("input[name*=chkTipoInm]"),allRadFrecuencia:$("input[name=radFrecuencia]")},f={rules:{txtSince:{required:true},txtDormitorios:{digits:true,min:0,max:10},txtBanios:{digits:true,min:0,max:20},txtEstacionamiento:{min:0},txtAntiguedad:{min:0},txtAreaconst:{required:false,decimals2:true},txtAreatotal:{required:false,decimals2:true},selDpto:{required:true,valueNotEquals:"0"},selProv:{required:true,valueNotEquals:"0"},selDist1:{required:true,valueNotEquals:"0"},txtDesde:{required:false,decimals2:true},txtHasta:{required:false,decimals2:true}},messages:{txtSince:{required:"Este campo es necesario"},txtDormitorios:{digits:"Ingrese un numero entero",min:"Ingrese un numero igual o mayor a 0",max:"Ingrese un numero igual o menor a 10"},txtBanios:{digits:"Ingrese un numero entero",min:"Ingrese un numero igual o mayor a 0",max:"Ingrese un numero igual o menor a 20"},txtEstacionamiento:{digits:"Ingrese un numero entero",min:"Ingrese un numero igual o mayor a 0"},txtAntiguedad:{digits:"Ingrese un numero entero",min:"Ingrese un numero igual o mayor a 0"},selDpto:{required:"Este campo es necesario",valueNotEquals:"Este campo es necesario"},selProv:{required:"Este campo es necesario",valueNotEquals:"Este campo es necesario"},selDist1:{required:"Este campo es necesario",valueNotEquals:"Este campo es necesario"}},focusInvalid:false,submitHandler:function(h){if(g.allRadOperacion.is(":checked")&&g.allRadUbicada.is(":checked")&&g.allChksInm.is(":checked")&&g.allRadFrecuencia.is(":checked")){h.submit()
}else{return false}}},e=function(h){$("html,body").animate({scrollTop:$(h).offset().top},700,"swing",function(){location.hash=h})},c=function(j,h){j.on("change",function(){if(j.is(":checked")){h.hide()}else{h.show()}})},b=function(j,h){j.on("change",function(){if(h.is(":visible")){h.hide()}})},d=function(j,h){if(j.is(":checked")){h.hide()}else{h.show();return true}};return{init:function(){g.formAlert.validate(f);c(g.allChksInm,g.errorChkInmueble);b(g.allRadOperacion,g.errorRadOperation);b(g.allRadUbicada,g.errorRadUbicada);b(g.allRadFrecuencia,g.errorRadFrecuencia);g.formAlert.on("submit",function(){var j=d(g.allChksInm,g.errorChkInmueble);var h=d(g.allRadOperacion,g.errorRadOperation);var k=d(g.allRadUbicada,g.errorRadUbicada);d(g.allRadFrecuencia,g.errorRadFrecuencia);if(j||h||k){e("#formAlert")}})},destroy:function(){}}},["libs/plugins/jqValidate-min.js"]);yOSON.AppCore.addModule("validate-datos-usuario",function(a){var b={formInfouser:"#formInfouser",dia:":input[name=selDia]",mes:":input[name=selMes]",year:":input[name=selAnio]",txtClave:":input[name=txtNewClave]",validateSettings:{rules:{txtEmail:{required:true,email:true,maxlength:20},txtEmailAltern:{email:true,maxlength:20},txtNombre:{required:true,nombre:true,minlength:3,maxlength:15},txtApellidos:{required:true,nombre:true,minlength:3,maxlength:15},txtDni:{dni:true},txtCell01:{celular:true,maxlength:15},txtTelef01:{phone:true,maxlength:15},txtNewClave:{minlength:8,maxlength:20},txtConfirmClave:{equalTo:"#txtNewClave"}}}},d={},c=function(){d.formInfouser=$(b.formInfouser);d.dia=$(b.dia);d.mes=$(b.mes);d.year=$(b.year);d.token=$("#token");d.txtClave=$(b.txtClave)},e=function(){d.formInfouser.validate(b.validateSettings);$().dateSelectBoxes(d.mes,d.dia,d.year);d.txtClave.pstrength();d.txtClave.trigger("keyup")};return{init:function(){c();e()},destroy:function(){}}},["libs/plugins/jqValidate-min.js","libs/plugins/jqDateSelectBoxes.js","libs/plugins/jqPstrength.min.js"]);yOSON.AppCore.addModule("check-all",function(a){return{init:function(b){var d=$(".check-all"),c=$("input[name='chkAviso']");d.on("click",function(){if($(this).is(":checked")){$("input[name='chkAviso']").prop("checked",true)}else{$("input[name='chkAviso']").prop("checked",false)}});c.on("click",function(){if(!$(this).is(":checked")){$(".check-all",$(this).parents("table")).removeAttr("checked")}})},destroy:function(){}}});yOSON.AppCore.addModule("remove-all",function(a){var b={btn:$("#delete-ads")};return{init:function(c){var f=[],e,d;b.btn.on("click",function(){e=$("input[name='chkAviso']:checked");if(e.length>0){$("input[name='chkAviso']:checked").each(function(g,h){f.push($(h).val())});d=confirm("¿Esta seguro que desea eliminar los avisos seleccionados?");if(d){window.location=yOSON.baseHost+"application/aviso/eliminar-varios?"+$.param({p:f})}}else{warn("Seleccione al menos un aviso a Eliminar")}})},destroy:function(){}}});yOSON.AppCore.addModule("receive-alerts",function(a){var b={alerts:$("#chkAlertas"),content:$("#wrapper")};return{init:function(c){var d,e;b.alerts.on("click",function(){d=($(this).is(":checked"))?1:0;e=($(this).is(":checked"))?"Su alertas han sido activadas":"Su alertas han sido desactivadas";utils.loader(b.content,true);$.ajax({url:yOSON.baseHost+"application/alertas/recibir-alertas",data:{chkAlertas:d},method:"GET",dataType:"json",success:function(f){utils.validAjax(f,{success:function(g){utils.loader(b.content,false);echo(e,2000)},error:function(){utils.loader(b.content,false);warn("Ocurrió un error en la petición. Inténtelo de nuevo.")}})},error:function(){utils.loader(b.content,false);warn("Ocurrió un error en la petición. Inténtelo de nuevo.")}})})},destroy:function(){}}});yOSON.AppCore.addModule("delete-item",function(a){var c,d={actionIconsDelete:$("a.action-icons.delete")},b=function(f,e){d.actionIconsDelete.on("click",function(g){g.preventDefault();var h=$(this);$.confirm({title:f,answer:e,callback:function(j){if(j){window.location=h.attr("href")}}})})};return{init:function(e){b(e.title,e.answer)},destroy:function(){}}},["libs/plugins/jqFancybox-min.js","backbone/libs/underscore/underscore.js","libs/plugins/jqConfirm.js"]);yOSON.AppCore.addModule("select-paid",function(a){var b={cbopaid:"#selPaid"},d={},c=function(){d.cbopaid=$(b.cbopaid)},e=function(){d.cbopaid.on("change",function(f){f.preventDefault();a.trigger("order-tbl",[function(g,h){h.data=(typeof h.data=="undefined")?"fchPublicacion":h.data;h.order=(typeof h.order=="undefined")?"desc":h.order;g.scroll(a,h)}])})};return{init:function(){c();e()}}});yOSON.AppCore.addModule("validation",function(a){return{init:function(b){var c=b.form.split(",");$.each(c,function(d,f){var e={},f=$.trim(f);for(var g in yOSON.require[f]){e[g]=yOSON.require[f][g]}$(f).validate(e)})}}},["libs/plugins/jqValidate-min.js","data/validate.js"]);yOSON.AppCore.addModule("accordion",function(a){var c={accordion:".titmov-box",targets:".mov-box"},f={},e=this,d=function(){f.accordion=$(c.accordion);f.targets=$(c.targets)},g=function(){f.accordion.on("click",b)},b=function(h){h.preventDefault();var k=$(this),j=k.data("child")||k.parent().find(c.targets);if(typeof k.data("child")=="undefined"){k.data("child",j)}if(k.hasClass("act")){f.targets.slideUp(800,function(){$(this).parent().find(c.accordion).removeClass("act")});e.fn&&e.fn(k)}else{f.targets.not(j).slideUp(800,function(){$(this).parent().find(c.accordion).removeClass("act")});j.slideDown(800,function(){k.addClass("act");e.fn&&e.fn(k)})}};e.fn=null;a.events(["cblkAccordion"],function(h){e.fn=h},this);return{init:function(){d();g()}}});yOSON.AppCore.addModule("select-certificados",function(k){var a={1:{img:yOSON.statHost+"img/elements/certificate-1.png?v="+yOSON.statVers,label:"Agente certificado"},2:{img:yOSON.statHost+"img/elements/certificate-3.png?v="+yOSON.statVers,label:"Agente Mi Vivienda"}},l={cboCertif:"#selCertificacion",btnAddCertif:"#addCertif",placeCertif:".certificate-box",ctrlMiVivienda:"#control-mivivienda",hCertificado:":input[name=hCertificado]"},e={},g=[],b=function(){e.cboCertif=$(l.cboCertif);e.btnAddCertif=$(l.btnAddCertif);e.placeCertif=$(l.placeCertif);e.ctrlMiVivienda=$(l.ctrlMiVivienda);e.hCertificado=$(l.hCertificado)},d=function(){e.cboCertif.on("change",function(p){f(false);if(this.value){if(parseInt(this.value)===2){e.ctrlMiVivienda.removeClass("hide");f(false)}else{e.ctrlMiVivienda.addClass("hide");f(true,{cboValue:this.value,nameFunc:h})}}});e.ctrlMiVivienda.find(":input").on("keyup",function(q){var p=$(this);f(false);if($.trim(p.val())&&/^[A-Za-z0-9\-]{0,7}$/i.test(p.val())){f(true,{cboValue:2,nameFunc:c})}});if(e.hCertificado.val()!==""){var n=e.hCertificado.val(),o=n.split(",");e.placeCertif.find(".btn-delete").each(function(p,q){$(q).data("id",o[p])})}j()},f=function(n,o){if(n){e.btnAddCertif.removeClass("disabled").on("click",{cboValue:o.cboValue},o.nameFunc)}else{e.btnAddCertif.addClass("disabled").off("click")}},h=function(r){var p=r.data.cboValue,n=$('<div class="item-certif"></div>'),o=$('<a class="btn-closebox btn-delete" href="javascript:;"></a>'),q=$("<img/>");e.cboCertif.find("option[value="+p+"]").remove();e.cboCertif.find(":first-child").attr("selected","selected");e.cboCertif.trigger("change");o.data("id",p);o.appendTo(n);q.attr("src",a[p].img).appendTo(n);n.appendTo(e.placeCertif);m("add",p)},m=function(r,n){var p=0,o=[],q="",s="",u=e.hCertificado.val();if(u!==""){o=u.split(",")}var t={add:function(){o.push(n)},remove:function(){var v=$.inArray(n,o);o.splice(v,1)},order:function(){o=[];for(var v=0;v<n.length;v++){o.push($(n[v]).data("id"))}},edit:function(){o=[];for(var v=0;v<n.length;v++){o.push(n)}},"default":function(){}};if(t[r]){t[r]()}else{t["default"]()}s=o.join(",");e.hCertificado.attr("value",s)},j=function(){e.placeCertif.on("click",".btn-delete",function(n){n.preventDefault();var s=$(this),q=s.parent(),o=s.data("id"),p=a[o].label;var r=$('<option value="'+o+'">'+p+"</option>");r.appendTo(e.cboCertif);m("remove",o);q.remove()})},c=function(s){var q=s.data.cboValue,o=$('<div class="item-certif post-relt"></div>'),p=$('<a class="btn-closebox btn-delete" href="javascript:;"></a>'),n=$('<div class="byconfirm">PENDIENTE<br>DE ACTIVACIÓN</div>'),r=$("<img/>");
e.cboCertif.find("option[value="+q+"]").remove();e.cboCertif.find(":first-child").attr("selected","selected");e.cboCertif.trigger("change");p.data("id",q);p.appendTo(o);n.appendTo(o);r.attr("src",a[q].img).appendTo(o);e.ctrlMiVivienda.addClass("hide");f(false);o.appendTo(e.placeCertif);m("add",q)};return{init:function(){b();d()}}});yOSON.AppCore.addModule("slidejs",function(a){var b=this;b.inst=null;a.events(["instSlidejs"],function(c){c&&c(b.inst)},this);return{init:function(d){var c=d.slide,f=d.config||{},e=$(c).Slidejs(f);b.inst=e}}},["libs/plugins/jqSlidejs.js"]);yOSON.AppCore.addModule("order-highlight",function(k){var m={wrapper:".tbl-admin",highlight:".tdAcc3 a.highlight",whighlight:"#slide-highlight",deleted:".btn-closebox"},l='<div class="box-highlight" style="display:none"><span class="action-icons highlight"></span><span class="text">Destacado en Tienda</span></div>',e,f={},h=true,j=null,b=function(){f.wrapper=$(m.wrapper);f.whighlight=$(m.whighlight)},c=function(){g();f.wrapper.on("click",m.highlight,a);f.whighlight.on("click",m.deleted,function(n){n.preventDefault();var o=$(this).parents(".mov-ads").attr("data-id");$("#ads-"+o).find(m.highlight).trigger("click")})},g=function(){j=$.Sortablejs({el:".mov-ads",close:false,navs:{previous:".sort-nleft",next:".sort-nrigth"},input:"#txtHighlight",disable:"disabled"})},a=function(s){s.preventDefault();var q=$(this),p=q.parents("tr"),n=_.template(e),r,o;if(h){d(true);if(q.hasClass("act")){p.find(".box-highlight").fadeOut(600,function(){$(this).remove()});q.removeClass("act");k.trigger("instSlidejs",[function(t){var v=t,u=p.attr("id").replace(/[\s\ads-]/g,"");v.removeElement($(".mov-ads[data-id='"+u+"']"),function(){j.refresh();d(false)})}])}else{r=$(l);p.find(".twAdsagent").append(r);o=n(p.data("json")).replace(/[\n\r]/g,"");k.trigger("instSlidejs",[function(t){var u=t;u.addElement($(o))}]);j.refresh();r.fadeIn(600,function(){d(false)});q.addClass("act")}}},d=function(o){var n=$(m.highlight);if(o){h=false;n.addClass("bloq")}else{h=true;n.removeClass("bloq")}};return{init:function(n){e=$("#tplAdsHighl").html();b();c()}}},["libs/plugins/jqSortable.js","backbone/libs/underscore/underscore.js"]);yOSON.AppCore.addModule("imagen-agente",function(a){var b={canvasImages:".choose-img .here-img",hPerfilPhoto:"#hPerfilPhoto",formUploader:"frm-DatosTienda",inputfile:".choose-img #logoUploader",btnUploader:".choose-img #btnUploader",target:".choose-img",customFilename:".choose-img .customfile-filename",customButtonUpload:".choose-img button.customfile-upload",limitPhotos:1,countMinPhotos:1},f={},c=function(){f.canvasImages=$(b.canvasImages);f.formUploader=$("#"+b.formUploader);f.inputFile=$(b.inputfile);f.btnUploader=$(b.btnUploader);f.target=$(b.target);f.customFilename=$(b.customFilename);f.customButtonUpload=$(b.customButtonUpload);f.hPerfilPhoto=$(b.hPerfilPhoto)},h=function(){e();d()},e=function(){f.inputFile.customFile({classesButton:"btn-small customfile-upload btn-gray",classesInput:"hide"})},d=function(){var k="",o=".jpg",m="",l={frm:b.formUploader,onComplete:function(p){utils.loader(f.target,false);var p=$.parseJSON(p);f.formUploader.attr("action","");f.formUploader.attr("target","");if(p.data.state[0]===0){warn(p.data.msg)}else{$.each(p.data.src,function(q,s){if(p.data.src[q].state==1){var r=p.data.src[q].img;g(f.canvasImages,yOSON.baseHost+"elements/tmp/"+r);f.hPerfilPhoto.val(r.split(".")[0])}else{warn(p.data.src[q].msg)}})}}},n=function(){utils.loader(f.target,true);setTimeout(function(){f.formUploader.attr("action",yOSON.baseHost+"agentes/mis-datos/upload-image-temporal/amount/1");$.fn.iframeUp("submit",l);f.inputFile.val("");$(b.customFilename).val("")},900)};if(window.File&&window.FileReader&&window.FileList&&window.Blob){var j=document.getElementById("logoUploader");j.addEventListener("change",function(s){var r=s.target.files,p=false;if(r.length==0){warn("Debe seleccionar un archivo");p=true}else{for(var q=0,t;t=r[q];q++){if(!(/\.(jpg|jpeg|bmp|png|gif)$/i).test(t.name)){warn(" El tipo de archivo seleccionado no es una imagen");p=true}else{if(t.size>=2097152){warn("El tamaño de la Imagen debe ser menor o igual a 2 Mb");p=true}}}}if(!p){n()}else{f.inputFile.val("");$(".customfile-filename").val("")}},false)}else{f.inputFile.on("change",function(){if(f.inputFile.val()!==""&&f.inputFile.val()!=="undefined"){n()}else{warn("Debe de seleccionar un archivo")}})}},g=function(k,l){var j=new Image();j.src=l;j.onload=function(){var m=200,n=124,o=this.height*(m/this.width);if(this.width>this.height&&this.width>m){j.style.height="auto";j.height="auto";j.style.width=m+"px";j.width=m+"px"}else{if(this.width<=this.height&&this.height>n){j.style.height=n+"px";j.height=n+"px";j.style.width="auto";j.width="auto"}else{j.style.height=this.height;j.height=this.height;j.style.width=this.width;j.width=this.width}}k.addClass("hide");k.html(j);k.fadeIn("slow")}};return{init:function(j){c();h()},destroy:function(){}}},["libs/plugins/jqUICore.js","libs/plugins/jqUISortable.js","libs/plugins/jqCustomfile.js","libs/plugins/jqIframeup.js"]);yOSON.AppCore.addModule("imagenes-portada-agente",function(j){var l={canvasImages:"#uploaderImages",formUploader:"frm-DatosTienda",inputfile:"#imageUploader",orderPhotos:"#orderPhotos",btnUploader:"#btnUploader",uploaderLoadingGroup:"#uploaderLoadingGroup",customFilename:".customfile-filename",customButtonUpload:"button.customfile-upload",limitPhotos:tmp.limitPhotos,countMinPhotos:4},f={},d=function(){f.canvasImages=$(l.canvasImages);f.formUploader=$("#"+l.formUploader);f.inputFile=$(l.inputfile);f.orderPhotos=$(l.orderPhotos);f.btnUploader=$(l.btnUploader);f.uploaderLoadingGroup=$(l.uploaderLoadingGroup)},e=function(){if(f.orderPhotos.val()!==""){var m=f.orderPhotos.val().split("|");l.countMinPhotos=l.countMinPhotos-m.length}b();g();c();k()},h=function(q,m){var o=0,n=[],p="",r="",t=f.orderPhotos.val();if(t!==""){n=t.split("|")}var s={add:function(){n.push(m);if(l.limitPhotos===n.length){$(l.customButtonUpload).attr("disabled","disabled").removeClass("btn-urb").addClass("btn-gray");warn("Solo puede subir un máximo de "+l.limitPhotos+" fotos")}},remove:function(){var u=$.inArray(m,n);n.splice(u,1);if(n.length===0){$(l.customFilename).attr("placeholder","No se han cargado imágenes")}if(l.limitPhotos>n.length){$(l.customButtonUpload).removeAttr("disabled").removeClass("btn-gray").addClass("btn-urb")}if(l.limitPhotos>l.countMinPhotos){l.countMinPhotos=l.countMinPhotos+1}},order:function(){n=[];for(var u=0;u<m.length;u++){n.push($(m[u]).attr("data-id"))}},edit:function(){n=[];for(var u=0;u<m.length;u++){n.push(m)}},"default":function(){}};if(s[q]){s[q]()}else{s["default"]()}r=n.join("|");f.orderPhotos.attr("value",r)},a=function(n){var m=n.split(".");return m[0]},b=function(){f.inputFile.customFile()},g=function(){var n="",s=".jpg",p="",o={frm:l.formUploader,onComplete:function(w){f.uploaderLoadingGroup.fadeOut("slow");var w=$.parseJSON(w);for(var v=0;v<w.data.src.length;v++){l.countMinPhotos--}f.formUploader.attr("action","");f.formUploader.attr("target","");if(w.data.state[0]===0){warn(w.data.msg)}else{for(var u=0;u<w.data.src.length;u++){var x=w.data.src[u];if(x.state==1){var t=a(x.img);f.canvasImages.append('<div class="preview" data-id="'+t+'"><a class="btn-closebox btn-delete" href="javascript:;"></a><span class="imageHolder"><img class="preview-img" src="'+yOSON.baseHost+"elements/tmp/"+x.img+'" /></span></div>');h("add",t)}else{warn(x.msg)}}}}},r=function(){f.uploaderLoadingGroup.fadeIn("slow");setTimeout(function(){f.formUploader.attr("action",yOSON.baseHost+"agentes/mis-datos/upload-image-temporal/amount/"+l.countMinPhotos);$.fn.iframeUp("submit",o);f.inputFile.val("");$(l.customFilename).val("")},900)},q=function(t){};if(window.File&&window.FileReader&&window.FileList&&window.Blob){var m=document.getElementById("imageUploader");m.addEventListener("change",function(w){var v=w.target.files,t=false;if(v.length==0){warn("Debe seleccionar un archivo");t=true}else{for(var u=0,x;x=v[u];
u++){if(!(/\.(jpg|jpeg|bmp|png|gif)$/i).test(x.name)){warn(" El tipo de archivo seleccionado no es una imagen");t=true}else{if(x.size>=2097152){warn("El tamaño de la Imagen debe ser menor o igual a 2 Mb");t=true}}}}if(!t){r()}else{f.inputFile.val("");$(".customfile-filename").val("")}},false)}else{f.inputFile.on("change",function(){if(f.inputFile.val()!==""&&f.inputFile.val()!=="undefined"){r()}else{warn("Debe de seleccionar un archivo")}})}},k=function(m){f.canvasImages.on("click",".btn-delete",function(n){n.preventDefault();var q=$(this),p=q.parent(),o=a(p.attr("data-id"));p.fadeOut(400,function(){$.ajax({type:"GET",url:yOSON.baseHost+"agentes/mis-datos/delete-image-temporal/id/"+o,success:function(r){var r=$.parseJSON(r);if(r.data.state[0]===1){p.remove()}m&&m()}})});h("remove",o)})},c=function(){f.canvasImages.sortable({cursor:"move",opacity:0.5,update:function(m,n){h("order",f.canvasImages.children(".preview"))}});f.canvasImages.disableSelection()};return{init:function(m){d();e()},destroy:function(){}}},["libs/plugins/jqUICore.js","libs/plugins/jqUISortable.js","libs/plugins/jqCustomfile.js","libs/plugins/jqIframeup.js"]);yOSON.AppCore.addModule("search-highlight",function(a){var c={inpt:"#txtSearch",btn:".just-search .btn-urb",btndestq:".btn-destq",destq:"#infscroll"},e={},d=function(){e.inpt=$(c.inpt);e.btn=$(c.btn);e.btndestq=$(c.btndestq);e.destq=$(c.destq)},f=function(){e.btn.on("click",function(g){g.preventDefault();a.trigger("returnInst",[function(l){var m=l,h=m.settings,k=h.ajax,j;k.search=function(){return e.inpt.val()};h.ajax=k;j=m.convertData(h.ajax);j.total=b.numTotal(m.arquitect.regs.length);b.ajax(h.url,j,{success:function(n){$.each(n.data.src,function(o,p){n.data.src[o]["path"]=tmp.urlElements});m.fetch(n.data.src,n.extra)},error:function(){warn("Ocurrió un error en la petición. Inténtelo de nuevo.")}})}])});e.btndestq.bind("click",function(){if(!e.destq.hasClass("act")){e.destq.trigger("click")}});a.trigger("cblkAccordion",[function(g){var h=g;a.trigger("returnInst",[function(j){var k=j;if(h.attr("id")=="infscroll"&&h.hasClass("act")){k.stopScroll(false)}else{k.stopScroll(true)}}])}])},b={ajax:function(g,j,k){var h=$("#wrapper");utils.loader(h,true);$.ajax({url:g,data:j,dataType:"json",type:"GET",success:function(l){utils.loader(h,false);k.success&&k.success(l)},error:function(l,n,m){utils.loader(h,false);k.error&&k.error(l,n,m)}})},numTotal:function(h){var g=h%20,j=(g!=0)?((h-g)/20)+1:h/20;j=(j==0)?1:j;return j*20}};return{init:function(){d();f()}}});yOSON.AppCore.addModule("up-price",function(b){var c={chkAdd:"#chkAdd",totalPrice:".total-price span"},e={},d=function(){e.chkAdd=$(c.chkAdd);e.totalPrice=$(c.totalPrice)},f=function(){e.chkAdd.on("change",a)},a=function(){var h,g=parseFloat(tmp.precioExtra),j=parseFloat(tmp.precioBase);if(e.chkAdd.is(":checked")){h=g+j}else{h=j}h=parseFloat(h).toFixed(2);e.totalPrice.text("S/. "+h)};return{init:function(){d();f()}}});yOSON.AppCore.addModule("show-add-ruc",function(a){var b={linkNewDoc:"#nuevo-doc",selPerfilPago:"#selPerfilPago option",radFactura:"#radFactura"},e={},d=function(){e.linkNewDoc=$(b.linkNewDoc);e.selPerfilPago=$(b.selPerfilPago);e.radFactura=$(b.radFactura)},f=function(){e.radFactura.on("change",c)},c=function(){if(e.radFactura.is(":checked")){if(e.selPerfilPago.length<=1){e.linkNewDoc.trigger("click")}}};return{init:function(){d();f();c()}}});